INCLUDE console.inc
.DATA
	X DB 200 DUP (?)
	Y DB 200 DUP (?)
.CODE
PROC1 PROC
R:	INCHAR CL
	CMP CL, '.'
	JE B
	INC EAX
	MOV [ESI+EAX-1], CL
	JMP R
B:	RET
PROC1 ENDP

PROC2 PROC
	PUSH EAX
	CMP ECX, 0
	JE P1
	MOV DX, 10
T:	MOV AX, 0
	CMP BYTE PTR [ESI+ECX-1], 'a'
	JB P
	CMP BYTE PTR [ESI+ECX-1], 'z'
	JA P
	MOV AL, BYTE PTR [ESI+ECX-1]
	SUB AL, 'a'
	ADD AL, 1
	DIV DL
	MOV [ESI+ECX-1], AH
	ADD BYTE PTR [ESI+ECX-1], '0'
P:	LOOP T
P1:	POP EAX
	RET	
PROC2 ENDP

PROC3 PROC
	PUSH EDX
	PUSH ECX
	PUSH EAX
	MOV ECX, EDX
	MOV EDX, 0
OPO:	MOV DL, BYTE PTR [ESI + ECX - 1]
	ADD ESI, ECX
	ADD ESI, ECX
	MOV [ESI - 2], DL
	MOV [ESI - 1], DL
	SUB ESI, ECX
	SUB ESI, ECX
	LOOP OPO
F2:	POP EAX
	POP ECX
	POP EDX
RT:	RET
PROC3 ENDP

START:	
	MOV EAX, 0; N
	LEA ESI, X
	CALL PROC1
	MOV EBX, EAX
	MOV EAX, 0
	LEA ESI, Y
	CALL PROC1
	SUB EBX, 1
	CMP EBX, 99
	JA ERROR
	ADD EBX, 1
	SUB EAX, 1
	CMP EAX, 99
	JA ERROR
	CMP EBX, EAX
	JAE L1
	ADD EAX, 1
	MOV ECX, EAX
	LEA ESI, Y
	CALL PROC2
	LEA ESI, X
	MOV EDX, EBX
	CALL PROC3
	JMP L4
L1:
	MOV ECX, EBX
	LEA ESI, X
	CALL PROC2
	LEA ESI, Y
	ADD EAX, 1
	MOV EDX, EAX
	CALL PROC3
	MOV ECX, EBX
	MOV ESI, 0
L2:	OUTCHAR BYTE PTR X[ESI]	
	INC ESI
	LOOP L2
	MOV ECX, EAX
	ADD ECX, ECX
	MOV ESI, 0
	NEWLINE
L3:	OUTCHAR BYTE PTR Y[ESI]	
	INC ESI
	LOOP L3
	JMP E
L4:	MOV ECX, EBX
	ADD ECX, ECX
	MOV ESI, 0
L5:	OUTCHAR BYTE PTR X[ESI]	
	INC ESI
	LOOP L5
	NEWLINE
	MOV ECX, EAX
	MOV ESI, 0
L6:	OUTCHAR BYTE PTR Y[ESI]	
	INC ESI
	LOOP L6
	JMP E
ERROR:	OUTSTR 'ERROR'
E:
EXIT
END START